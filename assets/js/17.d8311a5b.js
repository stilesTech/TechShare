(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{457:function(a,s,t){a.exports=t.p+"assets/img/2446934443.33563c79.png"},458:function(a,s,t){a.exports=t.p+"assets/img/1030161887.5500f94b.png"},459:function(a,s,t){a.exports=t.p+"assets/img/3816535471.c2a9a6bc.png"},460:function(a,s,t){a.exports=t.p+"assets/img/1089567996.07329fdb.png"},578:function(a,s,t){"use strict";t.r(s);var n=t(10),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("Nginx是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。")]),a._v(" "),s("p",[a._v("官网：https://www.nginx.com/")]),a._v(" "),s("p",[a._v('PHP（全称：Hypertext Preprocessor，即: 超文本预处理器"）是一种通用开源脚本语言。')]),a._v(" "),s("p",[a._v("官网：https://www.php.net/")]),a._v(" "),s("p",[s("strong",[a._v("1.部署PHP环境")])]),a._v(" "),s("p",[a._v("1.1:拉取PHP")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull php:7.3.5-fpm\n")])])]),s("p",[a._v("2.1:创建/etc/nginx/www 文件夹用于挂载PHP工作目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir /etc/nginx\nmkdir /etc/nginx/www\n")])])]),s("p",[a._v("3.1:运行PHP容器")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run --name myphp-fpm -v /etc/nginx/www:/www -d php:7.3.5-fpm\n")])])]),s("p",[s("strong",[a._v("2:部署nginx环境")])]),a._v(" "),s("p",[a._v("2.1:拉取nginx镜像")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull nginx\n")])])]),s("p",[a._v("2.2运行容器")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -p 80:80 --name nginx -d nginx\n")])])]),s("p",[a._v("2.3:第二步运行的Nginx的配置文件是在容器内部的，不方便修改，所以我们可以先把容器内的配置文件复制到宿主机")]),a._v(" "),s("p",[s("img",{attrs:{src:t(457),alt:"../uploads/2020/10/2446934443.png"}})]),a._v(" "),s("p",[a._v("2.4:复制容器内的配置文件到宿主机，或者仅复制conf.d文件夹内的配置文件，运行时挂载相应文件即可")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker cp -a nginx:/etc/nginx/ /etc/nginx/conf\n")])])]),s("p",[a._v("2.5:停止Nginx容器并删除")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" nginx\n")])])]),s("p",[a._v("2.6:重新运行容器，并挂载我们在第三步复制出来的配置文件目录")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /etc/nginx/logs\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--restart")]),a._v(" always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--link")]),a._v(" myphp-fpm:php "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/nginx/www:/usr/share/nginx/html "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/nginx/conf/:/etc/nginx/ "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /etc/nginx/logs:/var/log/nginx nginx\n")])])]),s("p",[a._v("2.7:添加测试文件")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir vi /etc/nginx/index.html\n内容：ok nginx\n")])])]),s("p",[a._v("访问localhost:80(我是部署在虚拟机，8080是宿主机和docker虚拟机端口80的映射端口)")]),a._v(" "),s("p",[s("img",{attrs:{src:t(458),alt:"../uploads/2020/10/1030161887.png"}})]),a._v(" "),s("p",[a._v("2.8:修改nginx配置")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi /etc/nginx/conf/conf.d/default.conf\n")])])]),s("p",[a._v("如下图")]),a._v(" "),s("p",[s("img",{attrs:{src:t(459),alt:"../uploads/2020/10/3816535471.png"}})]),a._v(" "),s("p",[a._v("fastcgi_pass myphp-fpm:9000; #将请求代理到容器myphp-fpm到9000端口")]),a._v(" "),s("h1",{attrs:{id:"这个命令是指定将http代理到哪个fastcgi服务端接口。fastcgi-pass后面是填写fastcgi服务端地址的-这个地址可以是域地址-也可以是uninx-域套接字。"}},[s("strong",[a._v("这个命令是指定将http代理到哪个fastcgi服务端接口。fastcgi_pass后面是填写fastcgi服务端地址的，这个地址可以是域地址，也可以是Uninx-域套接字。")])]),a._v(" "),s("p",[a._v("fastcgi_param SCRIPT_FILENAME $/www/$fastcgi_script_name;")]),a._v(" "),s("h1",{attrs:{id:"脚本文件请求的路径-www-映射宿主机挂载的-etc-nginx-www目录-这里是个大坑"}},[s("strong",[a._v("脚本文件请求的路径 (/www/ 映射宿主机挂载的/etc/nginx/www目录，这里是个大坑)")])]),a._v(" "),s("p",[a._v("2.9:创建index.php文件测试结果")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vi /etc/nginx/www/index.php\n")])])]),s("p",[a._v("内容如下")]),a._v(" "),s("p",[s("img",{attrs:{src:t(460),alt:"../uploads/2020/10/1089567996.png"}})]),a._v(" "),s("p",[a._v("重启nginx容器使配置生效")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker restart nginx\n")])])]),s("p",[a._v("如无意外访问localhost:80/index.php 可看到如下界面")])])}),[],!1,null,null,null);s.default=e.exports}}]);