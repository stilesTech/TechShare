(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{446:function(e,a,s){e.exports=s.p+"assets/img/1561250293.acc62d5d.jpg"},574:function(e,a,s){"use strict";s.r(a);var t=s(10),n=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"kubernetes-dashboard账号"}},[e._v("kubernetes-Dashboard账号")]),e._v(" "),a("p",[e._v("简介：作为Kubernetes的Web用户界面，用户可以通过Dashboard在Kubernetes集群中部署容器化的应用，对应用进行问题处理和管理，并对集群本身进行管理。本文介绍下dashboard的安装过程。")]),e._v(" "),a("p",[a("strong",[e._v("1：安装kubernetes dashboard")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl create -f <https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml>\n")])])]),a("p",[a("strong",[e._v("2: 创建账号")])]),e._v(" "),a("p",[e._v("创建kubernetes-dashboard.yaml文件内容如下")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: admin-user\n  namespace: kube-system\n")])])]),a("p",[e._v("执行")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl create -f kubernetes-dashboard.yaml\n")])])]),a("p",[a("strong",[e._v("3：绑定到ClusterRole")])]),e._v(" "),a("p",[e._v("创建ClusterRoleBinding.yaml文件内容如下")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: admin-user\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: cluster-admin\nsubjects:\n- kind: ServiceAccount\n  name: admin-user\n  namespace: kube-system\n")])])]),a("p",[e._v("执行")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl create -f ClusterRoleBinding.yaml\n")])])]),a("p",[a("strong",[e._v("4:获取管理员用户的Token")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')\n")])])]),a("p",[e._v("你会看到打印出类似：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Name:         admin-user-token-6gl6l\nNamespace:    kube-system\nLabels:\nAnnotations:  kubernetes.io/service-account.name=admin-user\n              kubernetes.io/service-account.uid=b16afba9-dfec-11e7-bbb9-901b0e532516\n\nType:  kubernetes.io/service-account-token\n\nData\n====\nca.crt:     1025 bytes\nnamespace:  11 bytes\ntoken:      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLTZnbDZsIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJiMTZhZmJhOS1kZmVjLTExZTctYmJiOS05MDFiMGU1MzI1MTYiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.M70CU3lbu3PP4OjhFms8PVL5pQKj-jj4RNSLA4YmQfTXpPUuxqXjiTf094_Rzr0fgN_IVX6gC4fiNUL5ynx9KU-lkPfk0HnX8scxfJNzypL039mpGt0bbe1IXKSIRaq_9VW59Xz-yBUhycYcKPO9RM2Qa1Ax29nqNVko4vLn1_1wPqJ6XSq3GYI8anTzV8Fku4jasUwjrws6Cn6_sPEGmL54sq5R4Z5afUtv-mItTmqZZdxnkRqcJLlg2Y8WbCPogErbsaCDJoABQ7ppaqHetwfM_0yMun6ABOQbIwwl8pspJhpplKwyo700OSpvTT9zlBsu-b35lzXGBRHzv5g_RA\n")])])]),a("p",[e._v("复制token输入即可")]),e._v(" "),a("p",[a("img",{attrs:{src:s(446),alt:"../uploads/2020/10/1561250293.jpg"}})]),e._v(" "),a("p",[e._v("参考资料：")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/kubernetes/dashboard/wiki/Creating-sample-user",target:"_blank",rel:"noopener noreferrer"}},[e._v("Creating sample user"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);