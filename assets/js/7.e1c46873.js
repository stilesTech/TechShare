(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{173:function(s,t,n){s.exports=n.p+"assets/img/251376409.cc3b242c.jpg"},174:function(s,t,n){s.exports=n.p+"assets/img/2557773529.0220c0c9.jpg"},175:function(s,t,n){s.exports=n.p+"assets/img/3462620899.64b9b88a.jpg"},176:function(s,t,n){s.exports=n.p+"assets/img/4037582657.baba7c02.jpg"},177:function(s,t,n){s.exports=n.p+"assets/img/3869712054.0a3ab79e.jpg"},178:function(s,t,n){s.exports=n.p+"assets/img/1621096654.652525f3.jpg"},179:function(s,t,n){s.exports=n.p+"assets/img/2719988944.e44b9309.jpg"},180:function(s,t,n){s.exports=n.p+"assets/img/3790967767.495b3bb2.jpg"},181:function(s,t,n){s.exports=n.p+"assets/img/1900698993.e34d4183.jpg"},182:function(s,t,n){s.exports=n.p+"assets/img/1638465169.b87615cc.jpg"},183:function(s,t,n){s.exports=n.p+"assets/img/75287297.853e4feb.jpg"},184:function(s,t,n){s.exports=n.p+"assets/img/1217804723.d620459f.jpg"},185:function(s,t,n){s.exports=n.p+"assets/img/1404944688.cad6786b.jpg"},288:function(s,t,n){"use strict";n.r(t);var e=n(4),p=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"基于jenkins-tfs-msbuild实现自动发布"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于jenkins-tfs-msbuild实现自动发布"}},[s._v("#")]),s._v(" 基于Jenkins+tfs+msbuild实现自动发布")]),s._v(" "),e("p",[s._v("Jenkins是一款开源 CI&CD 软件，用于自动化各种任务，包括构建、测试和部署软件.")]),s._v(" "),e("p",[s._v("官网地址:Jenkins, 默认端口8080")]),s._v(" "),e("p",[e("strong",[s._v("初始化jenkins")])]),s._v(" "),e("p",[s._v("1.浏览器输入：")]),s._v(" "),e("p",[s._v("http://localhost:8080")]),s._v(" "),e("p",[s._v("解锁jenkins")]),s._v(" "),e("p",[e("img",{attrs:{src:n(173),alt:"../uploads/2020/10/251376409.jpg"}})]),s._v(" "),e("p",[s._v("在如图所示的路径下面打开initialAdminPassword文件，复制密码输入即可")]),s._v(" "),e("p",[s._v("2.自定义Jenkins ，选择安装推荐的插件")]),s._v(" "),e("p",[e("img",{attrs:{src:n(174),alt:"../uploads/2020/10/2557773529.jpg"}})]),s._v(" "),e("ol",[e("li",[s._v("安装MSBuild和TFS插件安装")])]),s._v(" "),e("p",[s._v("在Manage Jenkins 的 Manage Plugin 里面我们找到 MSBuild 和 Team Foundation Server Plug-in 插件，勾选，点击 Download now and install after restart 按钮，勾选 Restart Jenkins when installation is complete and no jobs are running 。")]),s._v(" "),e("p",[e("img",{attrs:{src:n(175),alt:"../uploads/2020/10/3462620899.jpg"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(176),alt:"../uploads/2020/10/4037582657.jpg"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(177),alt:"../uploads/2020/10/3869712054.jpg"}})]),s._v(" "),e("p",[s._v("安装完成之后 Jenkins 会重启，等待重启完毕之后，来到 Jenkins>>Global Tool Configuration 查看 MSBuild配置msbuild的路径，我这边是安装了vs2017在安装目录下面可以找到MSBuild路径，如下图：")]),s._v(" "),e("p",[e("img",{attrs:{src:n(178),alt:"../uploads/2020/10/1621096654.jpg"}})]),s._v(" "),e("p",[e("strong",[s._v("项目构建")])]),s._v(" "),e("p",[s._v("选择FreeStyle Project(自由风格的构建)，相关配置如下图")]),s._v(" "),e("p",[e("img",{attrs:{src:n(179),alt:"../uploads/2020/10/2719988944.jpg"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(180),alt:"../uploads/2020/10/3790967767.jpg"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(181),alt:"../uploads/2020/10/1900698993.jpg"}})]),s._v(" "),e("p",[s._v("MSBuild参数说明如下：")]),s._v(" "),e("p",[s._v("/t:Rebuild (每次都是重新构建)/p:Configuration=Release （构建的是发布版本）/p:VisualStudioVersion=15.0 （vs的版本,使用的是2017填写的是15.0）/p:WebProjectOutputDir=D:\\wwwroot\\test （发布路径）/p:OutputPath=D:\\wwwroot\\test\\bin (输出路径)/p:DeployOnBuild=True （表示启用编译并发布）")]),s._v(" "),e("p",[s._v("msbuild文档："),e("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/visualstudio/msbuild/msbuild?view=vs-2022",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击查看文档"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("msbuild15版本离线下载文件："),e("a",{attrs:{href:"https://www.microsoft.com/zh-CN/download/details.aspx?id=48159",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击下载"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("执行windows批处理命令复制目录文件到对应站点下面")]),s._v(" "),e("p",[e("img",{attrs:{src:n(182),alt:"../uploads/2020/10/1638465169.jpg"}})]),s._v(" "),e("p",[s._v("xcope source [destination] [命令参数]")]),s._v(" "),e("p",[s._v("source 指定要复制的文件")]),s._v(" "),e("p",[s._v("destination 指定新文件的位置和/或名称。")]),s._v(" "),e("p",[s._v("/s 复制目录和子目录，除了空的")]),s._v(" "),e("p",[s._v("/e 复制目录和子目录，包括空的")]),s._v(" "),e("p",[s._v("/y 禁止提示以确认改写一个现存目标文件")]),s._v(" "),e("p",[s._v("/s /e /y 表示完成拷贝； exclude")]),s._v(" "),e("p",[s._v("exclude 指定含有字符串的文件列表。每个字符串在文件中应位于单独的一行。如果任何字符串与复制文件的绝对路径的任何部分相符，则排除复制该文件。例如，指定如 \\obj\\ 或 .obj 的字符串会分别排除目录 obj 下面的所有文件或带有.obj 扩展名的所有文件。")]),s._v(" "),e("p",[e("img",{attrs:{src:n(183),alt:"../uploads/2020/10/75287297.jpg"}})]),s._v(" "),e("p",[s._v("手动构建项目,完成构建-发布的流程")]),s._v(" "),e("p",[e("img",{attrs:{src:n(184),alt:"../uploads/2020/10/1217804723.jpg"}})]),s._v(" "),e("p",[e("img",{attrs:{src:n(185),alt:"../uploads/2020/10/1404944688.jpg"}})]),s._v(" "),e("p",[e("strong",[s._v("总结")])]),s._v(" "),e("p",[s._v("整个流程通过tfs 拉取项目到jenkins安装目录的workspace目录下面，再通过msbuild编译和预发布到指定的目录，确保无误之后再通过windows xcopy命令覆盖到指定站点路径下面（此处根据需要还可以添加站点的备份）完成整个自动编译到发布的流程。")]),s._v(" "),e("p",[e("strong",[s._v("参考资料")])]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/tianyang1027/p/10333454.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("jekins+TFS+MsBuild实现.net的持续集成，自动化部署"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/edisonchou/p/CD_foundation_based_on_jenkins_and_docker.html",target:"_blank",rel:"noopener noreferrer"}},[s._v(".NET Core微服务之基于Jenkins+Docker实现持续部署（Part 1）"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=p.exports}}]);