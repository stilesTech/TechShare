<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RabbitMQä»‹ç» | stiles çš„æŠ€æœ¯åˆ†äº«</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicons/site.webmanifest">
    <link rel="shortcut icon" href="/assets/favicons/favicon.ico">
    <link rel="feed" href="/rss.xml" type="application/rss+xml" title="stiles çš„æŠ€æœ¯åˆ†äº«">
    <link rel="alternate" href="/rss.xml" type="application/rss+xml" title="stiles çš„æŠ€æœ¯åˆ†äº«">
    <meta name="description" content="ğŸŒŸ åˆ†äº«æ•ˆç‡æ–¹æ³• ğŸª„ã€ä¼˜è´¨æ–‡ç«  ğŸ“‘ã€ç¼–ç¨‹çŸ¥è¯† ğŸ¹ã€å®ç”¨å·¥å…· ğŸ› ï¸ å’Œæœ‰è¶£å†…å®¹ ğŸ˜„ã€‚">
    
    <link rel="preload" href="/assets/css/0.styles.e4da13b3.css" as="style"><link rel="preload" href="/assets/js/app.b28a2bc1.js" as="script"><link rel="preload" href="/assets/js/3.e4add4aa.js" as="script"><link rel="preload" href="/assets/js/9.6f63cecc.js" as="script"><link rel="preload" href="/assets/js/18.988666fd.js" as="script"><link rel="preload" href="/assets/js/30.2c6c5ffd.js" as="script"><link rel="prefetch" href="/assets/js/1.048b56ad.js"><link rel="prefetch" href="/assets/js/10.d66bd335.js"><link rel="prefetch" href="/assets/js/11.5353015a.js"><link rel="prefetch" href="/assets/js/12.3a8224ca.js"><link rel="prefetch" href="/assets/js/13.6a300b67.js"><link rel="prefetch" href="/assets/js/14.27356d4c.js"><link rel="prefetch" href="/assets/js/15.f3e3b9f5.js"><link rel="prefetch" href="/assets/js/16.232eeeaa.js"><link rel="prefetch" href="/assets/js/17.95ae0387.js"><link rel="prefetch" href="/assets/js/19.11cecc83.js"><link rel="prefetch" href="/assets/js/20.ea7286eb.js"><link rel="prefetch" href="/assets/js/21.08c0a3fe.js"><link rel="prefetch" href="/assets/js/22.5b7663b0.js"><link rel="prefetch" href="/assets/js/23.473406e0.js"><link rel="prefetch" href="/assets/js/24.e65ee4ce.js"><link rel="prefetch" href="/assets/js/25.677ba7d7.js"><link rel="prefetch" href="/assets/js/26.a22c0912.js"><link rel="prefetch" href="/assets/js/27.8e95d5b4.js"><link rel="prefetch" href="/assets/js/28.a5adbc4b.js"><link rel="prefetch" href="/assets/js/29.c5eadba5.js"><link rel="prefetch" href="/assets/js/31.1c072091.js"><link rel="prefetch" href="/assets/js/32.e688d3ec.js"><link rel="prefetch" href="/assets/js/33.1dec64f6.js"><link rel="prefetch" href="/assets/js/34.d69cc671.js"><link rel="prefetch" href="/assets/js/35.a16be746.js"><link rel="prefetch" href="/assets/js/36.84b97a7b.js"><link rel="prefetch" href="/assets/js/37.69499ecc.js"><link rel="prefetch" href="/assets/js/38.ba07a516.js"><link rel="prefetch" href="/assets/js/39.82de677c.js"><link rel="prefetch" href="/assets/js/4.edf1f4cd.js"><link rel="prefetch" href="/assets/js/40.e75bc9cf.js"><link rel="prefetch" href="/assets/js/41.caad468f.js"><link rel="prefetch" href="/assets/js/42.bd7b314e.js"><link rel="prefetch" href="/assets/js/5.4f9087b1.js"><link rel="prefetch" href="/assets/js/6.04df4e53.js"><link rel="prefetch" href="/assets/js/7.f9300331.js"><link rel="prefetch" href="/assets/js/8.7d604711.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4da13b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">stiles çš„æŠ€æœ¯åˆ†äº«</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="http://stiles.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://stiles.cc/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS è®¢é˜…
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/stilesTech/TechShare" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">
  å…³äº
</a></div><div class="nav-item"><a href="http://stiles.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="http://stiles.cc/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS è®¢é˜…
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/stilesTech/TechShare" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/summary/" class="sidebar-link">ç›®å½•</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æŠ€æœ¯</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/java/åˆ†å¸ƒå¼ç†è®ºåŸºç¡€.html" class="sidebar-link">åˆ†å¸ƒå¼ç†è®ºåŸºç¡€</a></li><li><a href="/docs/java/HTTPåè®®å‘å±•å†ç¨‹.html" class="sidebar-link">HTTPåè®®å‘å±•å†ç¨‹</a></li><li><a href="/docs/java/mongodb-å…¥é—¨åˆ°ä½¿ç”¨.html" class="sidebar-link">mongodb-å…¥é—¨åˆ°ä½¿ç”¨</a></li><li><a href="/docs/java/Prometheusç›‘æ§ä»‹ç».html" class="sidebar-link">Prometheus ç›‘æ§ä»‹ç»</a></li><li><a href="/docs/java/Redisè¯¦è§£.html" class="sidebar-link">Redisè¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>é˜Ÿåˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/rabbitmq/RabbitMQä»‹ç».html" class="active sidebar-link">RabbitMQä»‹ç»</a></li><li><a href="/docs/rabbitmq/Rabbitmqæ ¸å¿ƒåè®®AMQPè¯¦è§£.html" class="sidebar-link">Rabbitmqæ ¸å¿ƒåè®®AMQPè¯¦è§£</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>è½¯ä»¶å·¥ç¨‹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/engineering/ELKç›‘æ§æ­å»º.html" class="sidebar-link">ELKç›‘æ§æ­å»º</a></li><li><a href="/docs/engineering/ELK-Windowsç¯å¢ƒæ­å»º.html" class="sidebar-link">ELK-Windowsç¯å¢ƒæ­å»º</a></li><li><a href="/docs/engineering/Liquibaseç®€å•ä»‹ç»ä¸ä½¿ç”¨.html" class="sidebar-link">Liquibaseç®€å•ä»‹ç»ä¸ä½¿ç”¨</a></li><li><a href="/docs/engineering/åœ¨dockerç¯å¢ƒä¸‹è¿è¡ŒPHP.html" class="sidebar-link">åœ¨dockerç¯å¢ƒä¸‹è¿è¡ŒPHP</a></li><li><a href="/docs/engineering/NET Core on K8Så…¥é—¨æ¼”ç¤º.html" class="sidebar-link">.NET Core on K8Så…¥é—¨æ¼”ç¤º</a></li><li><a href="/docs/engineering/åŸºäºJenkins+tfs+msbuildå®ç°è‡ªåŠ¨å‘å¸ƒ.html" class="sidebar-link">åŸºäºJenkins+tfs+msbuildå®ç°è‡ªåŠ¨å‘å¸ƒ</a></li><li><a href="/docs/engineering/ä½¿ç”¨kubewatchç›‘æ§k8sèµ„æºå˜æ›´.html" class="sidebar-link">ä½¿ç”¨kubewatchç›‘æ§k8sèµ„æºå˜æ›´</a></li><li><a href="/docs/engineering/kubernetes-Dashboardè´¦å·.html" class="sidebar-link">kubernetes-Dashboardè´¦å·</a></li><li><a href="/docs/engineering/kubernetesä¸Šéƒ¨ç½².NetCoreç¨‹åº.html" class="sidebar-link">kubernetesä¸Šéƒ¨ç½².net coreç¨‹åº</a></li><li><a href="/docs/engineering/centosä¸Šæ­å»ºredisé›†ç¾¤.html" class="sidebar-link">centosä¸Šæ­å»ºredisé›†ç¾¤</a></li><li><a href="/docs/engineering/SqlServer-AlwaysOnæ­å»º.html" class="sidebar-link">SqlServer AlwaysOnæ­å»º</a></li><li><a href="/docs/engineering/SqlServerä¸Šäº¿æ•°æ®è¿ç§»åˆ°redis.html" class="sidebar-link">SqlServerä¸Šäº¿æ•°æ®è¿ç§»åˆ°redis</a></li><li><a href="/docs/engineering/Upsourceå®è·µæŒ‡å—.html" class="sidebar-link">Upsourceå®è·µæŒ‡å—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä»£ç ç²¾è¿›</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/coding/ä»£ç ç²¾è¿›ä¹‹è·¯.html" class="sidebar-link">ä»£ç ç²¾è¿›ä¹‹è·¯</a></li><li><a href="/docs/coding/æ°å¦‚å…¶åˆ†çš„ä»£ç .html" class="sidebar-link">æ°å¦‚å…¶åˆ†çš„ä»£ç </a></li><li><a href="/docs/coding/ä»£ç å®¡æŸ¥æŒ‡å—.html" class="sidebar-link">ä»£ç å®¡æŸ¥æŒ‡å—</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å·¥å…·</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/tools/ä½¿ç”¨n8nè®¢é˜…ç½‘ç«™rssæ¶ˆæ¯æ¨é€åˆ°Telegram.html" class="sidebar-link">ä½¿ç”¨n8nè®¢é˜…ç½‘ç«™rssæ¶ˆæ¯æ¨é€åˆ°Telegram</a></li><li><a href="/docs/tools/wx-hubå¾®ä¿¡å…¬ä¼—å·æ–‡ç« åŒæ­¥å·¥å…·.html" class="sidebar-link">wx-hubå¾®ä¿¡å…¬ä¼—å·æ–‡ç« åŒæ­¥å·¥å…·</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>å…¶å®ƒ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/other/å°ç¨‹åºå¼€å‘ä»‹ç».html" class="sidebar-link">å°ç¨‹åºå¼€å‘ä»‹ç»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ€è€ƒ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/thinking/å–œæ¬¢ä¸€ä¸ªäººçš„æ„Ÿè§‰æœ‰å¤šç¾å¥½.html" class="sidebar-link">å–œæ¬¢ä¸€ä¸ªäººçš„æ„Ÿè§‰æœ‰å¤šç¾å¥½</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>1.RabbitMQä»‹ç»</strong></p> <p>RabbitMQï¼šæ˜¯é‡‡ç”¨Erlangå®ç°çš„ç»™äºˆAMQPåè®®æ ‡å‡†çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå»ºç«‹åœ¨Erlang OTPå¹³å°ä¸Šã€‚</p> <p>å®‰è£…é¡ºåºå¦‚ä¸‹ï¼š</p> <p>1ï¼šhttp://www.erlang.org/downloadsï¼Œä¸‹è½½Erlang OTPå®‰è£…åŒ…ã€‚</p> <p>2ï¼šhttp://www.rabbitmq.com/install-windows.htmlï¼Œä¸‹è½½rabbitmqå®‰è£…åŒ…ã€‚</p> <p><strong>2. AMQP messaging ä¸­çš„åŸºæœ¬æ¦‚å¿µ</strong></p> <p><img src="/assets/img/4051105280.99ce4d15.jpg" alt="../uploads/2020/10/4051105280.jpg"></p> <p><strong>Broker</strong>: æ¥æ”¶å’Œåˆ†å‘æ¶ˆæ¯çš„åº”ç”¨ï¼ŒRabbitMQ Serverå°±æ˜¯Message Brokerã€‚<strong>Virtual host</strong>: å‡ºäºå¤šç§Ÿæˆ·å’Œå®‰å…¨å› ç´ è®¾è®¡çš„ï¼ŒæŠŠAMQPçš„åŸºæœ¬ç»„ä»¶åˆ’åˆ†åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„åˆ†ç»„ä¸­ï¼Œç±»ä¼¼äºç½‘ç»œä¸­çš„namespaceæ¦‚å¿µã€‚å½“å¤šä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªRabbitMQ serveræä¾›çš„æœåŠ¡æ—¶ï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ªvhostï¼Œæ¯ä¸ªç”¨æˆ·åœ¨è‡ªå·±çš„vhoståˆ›å»ºexchangeï¼queueç­‰ã€‚<strong>Connection</strong>: publisherï¼consumerå’Œbrokerä¹‹é—´çš„TCPè¿æ¥ã€‚æ–­å¼€è¿æ¥çš„æ“ä½œåªä¼šåœ¨clientç«¯è¿›è¡Œï¼ŒBrokerä¸ä¼šæ–­å¼€è¿æ¥ï¼Œé™¤éå‡ºç°ç½‘ç»œæ•…éšœæˆ–brokeræœåŠ¡å‡ºç°é—®é¢˜ã€‚<strong>Channel</strong>: å¦‚æœæ¯ä¸€æ¬¡è®¿é—®RabbitMQéƒ½å»ºç«‹ä¸€ä¸ªConnectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹TCP Connectionçš„å¼€é”€å°†æ˜¯å·¨å¤§çš„ï¼Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚Channelæ˜¯åœ¨connectionå†…éƒ¨å»ºç«‹çš„é€»è¾‘è¿æ¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ”¯æŒå¤šçº¿ç¨‹ï¼Œé€šå¸¸æ¯ä¸ªthreadåˆ›å»ºå•ç‹¬çš„channelè¿›è¡Œé€šè®¯ï¼ŒAMQP methodåŒ…å«äº†channel idå¸®åŠ©å®¢æˆ·ç«¯å’Œmessage brokerè¯†åˆ«channelï¼Œæ‰€ä»¥channelä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚Channelä½œä¸ºè½»é‡çº§çš„Connectionæå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹TCP connectionçš„å¼€é”€ã€‚<strong>Exchange</strong>: messageåˆ°è¾¾brokerçš„ç¬¬ä¸€ç«™ï¼Œæ ¹æ®åˆ†å‘è§„åˆ™ï¼ŒåŒ¹é…æŸ¥è¯¢è¡¨ä¸­çš„routing keyï¼Œåˆ†å‘æ¶ˆæ¯åˆ°queueä¸­å»ã€‚å¸¸ç”¨çš„ç±»å‹æœ‰ï¼šdirect (point-to-point), topic (publish-subscribe) and fanout (multicast)ã€‚<strong>Queue</strong>: æ¶ˆæ¯æœ€ç»ˆè¢«é€åˆ°è¿™é‡Œç­‰å¾…consumerå–èµ°ã€‚ä¸€ä¸ªmessageå¯ä»¥è¢«åŒæ—¶æ‹·è´åˆ°å¤šä¸ªqueueä¸­ã€‚<strong>Binding</strong>: exchangeå’Œqueueä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼Œbindingä¸­å¯ä»¥åŒ…å«routing keyã€‚Bindingä¿¡æ¯è¢«ä¿å­˜åˆ°exchangeä¸­çš„æŸ¥è¯¢è¡¨ä¸­ï¼Œç”¨äºmessageçš„åˆ†å‘ä¾æ®ã€‚<strong>3.Exchangeç±»å‹</strong></p> <p>Exchangeæœ‰å¤šç§ç±»å‹ï¼Œæœ€å¸¸ç”¨çš„æ˜¯Directï¼Fanoutï¼Topicä¸‰ç§ç±»å‹ã€‚</p> <p><strong>Direct</strong></p> <p><img src="/assets/img/1951361367.fdf25b89.png" alt="../uploads/2020/10/1951361367.png"></p> <p>Messageä¸­çš„â€œrouting keyâ€å¦‚æœå’ŒBindingä¸­çš„â€œbinding keyâ€ä¸€è‡´ï¼Œ Direct exchangeåˆ™å°†messageå‘åˆ°å¯¹åº”çš„queueä¸­ã€‚</p> <p><strong>Fanout</strong></p> <p><img src="/assets/img/4139690241.1ff7b6ec.png" alt="../uploads/2020/10/4139690241.png"></p> <p>æ¯ä¸ªå‘åˆ°Fanoutç±»å‹Exchangeçš„messageéƒ½ä¼šåˆ†åˆ°æ‰€æœ‰ç»‘å®šçš„queueä¸Šå»ã€‚</p> <p><strong>Topic</strong></p> <p><img src="/assets/img/321849651.0e2ae37d.png" alt="../uploads/2020/10/321849651.png"></p> <p>æ ¹æ®routing keyï¼ŒåŠé€šé…è§„åˆ™ï¼ŒTopic exchangeå°†åˆ†å‘åˆ°ç›®æ ‡queueä¸­ã€‚Routing keyä¸­å¯ä»¥åŒ…å«ä¸¤ç§é€šé…ç¬¦ï¼Œç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼ï¼šâ€œ#â€é€šé…ä»»ä½•é›¶ä¸ªæˆ–å¤šä¸ªwordâ€œ*â€é€šé…ä»»ä½•å•ä¸ªword</p> <p><strong>4.å¸¸ç”¨å‘½ä»¤</strong></p> <p>å¯åŠ¨webç®¡ç†å·¥å…·:å®‰è£…ç›®å½•çš„sbin ç›®å½•ä¸‹ rabbitmq-plugins.bat enable rabbitmq_management</p> <p>æš‚åœæœåŠ¡ï¼šnet stop RabbitMQ</p> <p>å¼€å¯æœåŠ¡ï¼šnet start RabbitMQ</p> <p>æŸ¥çœ‹å·²æœ‰ç”¨æˆ·ï¼šrabbitmqctl.bat list_users</p> <p>æ–°å¢ä¸€ä¸ªç”¨æˆ·ï¼šrabbitmqctl.bat add_user username password</p> <p>è®¾ç½®ç”¨æˆ·ä¸ºè¶…çº§ç®¡ç†å‘˜ ï¼šrabbitmqctl.bat set_user_tags username administrator</p> <p>ä¿®æ”¹å¯†ç ï¼šrabbitmqctl change_password userName newPassword</p> <p>åˆ é™¤ç”¨æˆ·ï¼šrabbitmqctl.bat delete_user username</p> <p>æƒé™è®¾ç½®</p> <p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œç”¨æˆ·æƒé™æŒ‡çš„æ˜¯ç”¨æˆ·å¯¹exchangeï¼Œqueueçš„æ“ä½œæƒé™ï¼ŒåŒ…æ‹¬é…ç½®æƒé™ï¼Œè¯»å†™æƒé™ã€‚æˆ‘ä»¬é…ç½®æƒé™ä¼šå½±å“åˆ°exchangeã€queueçš„å£°æ˜å’Œåˆ é™¤ã€‚</p> <p>æˆ‘ä»¬é…ç½®æƒé™ä¼šå½±å“åˆ°exchangeã€queueçš„å£°æ˜å’Œåˆ é™¤ã€‚</p> <p>è¯»å†™æƒé™å½±å“åˆ°ä»queueé‡Œå–æ¶ˆæ¯ã€å‘exchangeå‘é€æ¶ˆæ¯ä»¥åŠqueueå’Œexchangeçš„ç»‘å®š(binding)æ“ä½œã€‚</p> <p>ä¾‹å¦‚ï¼š å°†queueç»‘å®šåˆ°æŸexchangeä¸Šï¼Œéœ€è¦å…·æœ‰queueçš„å¯å†™æƒé™ï¼Œä»¥åŠexchangeçš„å¯è¯»æƒé™ï¼›å‘exchangeå‘é€æ¶ˆæ¯éœ€è¦å…·æœ‰exchangeçš„å¯å†™æƒé™ï¼›ä»queueé‡Œå–æ•°æ®éœ€è¦å…·æœ‰queueçš„å¯è¯»æƒé™</p> <p>æƒé™ç›¸å…³å‘½ä»¤ä¸ºï¼š</p> <p>(1) è®¾ç½®ç”¨æˆ·æƒé™</p> <p>rabbitmqctl set_permissions -p VHostPath User ConfP WriteP ReadP</p> <p>(2) æŸ¥çœ‹(æŒ‡å®šhostpath)æ‰€æœ‰ç”¨æˆ·çš„æƒé™ä¿¡æ¯</p> <p>rabbitmqctl list_permissions [-p VHostPath]</p> <p>(3) æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æƒé™ä¿¡æ¯</p> <p>rabbitmqctl list_user_permissions User</p> <p>(4) æ¸…é™¤ç”¨æˆ·çš„æƒé™ä¿¡æ¯</p> <p>rabbitmqctl clear_permissions [-p VHostPath] User</p> <p>(1) è¶…çº§ç®¡ç†å‘˜(administrator)</p> <p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°(å¯ç”¨management pluginçš„æƒ…å†µä¸‹)ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç”¨æˆ·ï¼Œç­–ç•¥(policy)è¿›è¡Œæ“ä½œã€‚</p> <p>(2) ç›‘æ§è€…(monitoring)</p> <p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°(å¯ç”¨management pluginçš„æƒ…å†µä¸‹)ï¼ŒåŒæ—¶å¯ä»¥æŸ¥çœ‹rabbitmqèŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(è¿›ç¨‹æ•°ï¼Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µç­‰)</p> <p>(3) ç­–ç•¥åˆ¶å®šè€…(policymaker)</p> <p>å¯ç™»é™†ç®¡ç†æ§åˆ¶å°(å¯ç”¨management pluginçš„æƒ…å†µä¸‹), åŒæ—¶å¯ä»¥å¯¹policyè¿›è¡Œç®¡ç†ã€‚</p> <p>(4) æ™®é€šç®¡ç†è€…(management)</p> <p>ä»…å¯ç™»é™†ç®¡ç†æ§åˆ¶å°(å¯ç”¨management pluginçš„æƒ…å†µä¸‹)ï¼Œæ— æ³•çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•å¯¹ç­–ç•¥è¿›è¡Œç®¡ç†ã€‚</p> <p>(5) å…¶ä»–çš„</p> <p>æ— æ³•ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œé€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚</p> <p>5.ä¸»è¦ç«¯å£è¯´æ˜</p> <ul><li>4369 (epmd), 25672 (Erlang distribution)</li> <li>5672, 5671 (AMQP 0-9-1 without and with TLS)</li> <li>15672 (if management plugin is enabled)</li> <li>61613, 61614 (if STOMP is enabled)</li> <li>1883, 8883 (if MQTT is enabled)</li></ul> <p>**4369 (epmd), 25672 (Erlang distribution)**Epmd æ˜¯ Erlang Port Mapper Daemon çš„ç¼©å†™ï¼Œåœ¨ Erlang é›†ç¾¤ä¸­ç›¸å½“äº dns çš„ä½œç”¨ï¼Œç»‘å®šåœ¨4369ç«¯å£ä¸Šã€‚</p> <p>**5672, 5671 (AMQP 0-9-1 without and with TLS)**AMQP æ˜¯ Advanced Message Queuing Protocol çš„ç¼©å†™ï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œæ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œä¸“ä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹é—´å¯ä»¥ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ã€ä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚Erlang ä¸­çš„å®ç°æœ‰ RabbitMQ ç­‰ã€‚</p> <p>**15672 (if management plugin is enabled)**é€šè¿‡ http://serverip:15672 è®¿é—® RabbitMQ çš„ Web ç®¡ç†ç•Œé¢ï¼Œé»˜è®¤ç”¨æˆ·åå¯†ç éƒ½æ˜¯ guestã€‚ï¼ˆæ³¨æ„ï¼šRabbitMQ 3.0ä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤ç«¯å£æ˜¯55672ï¼Œä¸‹åŒï¼‰</p> <p>**61613, 61614 (if STOMP is enabled)**Stomp æ˜¯ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯æ–‡æœ¬åè®®ï¼Œå®ƒçš„è®¾è®¡æ ¸å¿ƒç†å¿µå°±æ˜¯ç®€å•ä¸å¯ç”¨æ€§ï¼Œå®˜æ–¹æ–‡æ¡£ï¼Œå®è·µä¸€ä¸‹ Stomp åè®®éœ€è¦ï¼š</p> <p>ä¸€ä¸ªæ”¯æŒ stomp æ¶ˆæ¯åè®®çš„ messaging server (è­¬å¦‚activemqï¼Œrabbitmqï¼‰ï¼›ä¸€ä¸ªç»ˆç«¯ï¼ˆè­¬å¦‚linux shell);ä¸€äº›åŸºæœ¬å‘½ä»¤ä¸æ“ä½œï¼ˆè­¬å¦‚ncï¼Œtelnet)</p> <p>**1883, 8883 (if MQTT is enabled)**MQTT åªæ˜¯ IBM æ¨å‡ºçš„ä¸€ä¸ªæ¶ˆæ¯åè®®ï¼ŒåŸºäº TCP/IP çš„ã€‚ä¸¤ä¸ª App ç«¯å‘é€å’Œæ¥æ”¶æ¶ˆæ¯éœ€è¦ä¸­é—´äººï¼Œè¿™ä¸ªä¸­é—´äººå°±æ˜¯æ¶ˆæ¯æœåŠ¡å™¨ï¼ˆæ¯”å¦‚ActiveMQ/RabbitMQï¼‰ï¼Œä¸‰è€…é€šä¿¡åè®®å°±æ˜¯ MQTT</p> <p>6.å‚è€ƒæ–‡æ¡£ï¼š</p> <p>https://www.cnblogs.com/frankyou/p/5283539.html</p> <p>https://www.cnblogs.com/diegodu/p/4971586.html</p> <p>https://www.cnblogs.com/liuxingke/articles/9889517.html</p></div> <footer class="page-edit"><!----> <div class="git-hub-star"><span class="prefix"><span style="position:relative;top:4px;right:-4px;"><a href="https://github.com/stilesTech/TechShare" aria-label="Star stilesTech/TechShare on GitHub" data-icon="octicon-star" data-show-count="true">
      Star
    </a></span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
    â†
    <a href="/docs/java/Redisè¯¦è§£.html" class="prev">
      Redisè¯¦è§£
    </a></span> <span class="next"><a href="/docs/rabbitmq/Rabbitmqæ ¸å¿ƒåè®®AMQPè¯¦è§£.html">
      Rabbitmqæ ¸å¿ƒåè®®AMQPè¯¦è§£
    </a>
    â†’
  </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b28a2bc1.js" defer></script><script src="/assets/js/3.e4add4aa.js" defer></script><script src="/assets/js/9.6f63cecc.js" defer></script><script src="/assets/js/18.988666fd.js" defer></script><script src="/assets/js/30.2c6c5ffd.js" defer></script>
  </body>
</html>
