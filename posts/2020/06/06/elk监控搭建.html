<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ELK监控搭建 | Stiles 的技术分享</title>
    <meta name="description" content="🌟 分享效率方法 🪄、优质文章 📑、编程知识 🎹、实用工具 🛠️ 和有趣内容 😄。">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicons/site.webmanifest">
  <link rel="shortcut icon" href="/assets/favicons/favicon.ico">
  <link rel="feed" href="/rss.xml" type="application/rss+xml" title="stiles 的技术分享">
  <link rel="alternate" href="/rss.xml" type="application/rss+xml" title="stiles 的技术分享">
    <link rel="preload" href="/assets/js/vendor.vue.f0f8acc0.js" as="script"><link rel="preload" href="/assets/css/0.styles.f776f255.css" as="style"><link rel="preload" href="/assets/js/vendor.commons.f776f255.js" as="script"><link rel="preload" href="/assets/css/styles.94e4f4c9.css" as="style"><link rel="preload" href="/assets/js/app.94e4f4c9.js" as="script"><link rel="preload" href="/assets/css/23.styles.92c23f5d.css" as="style"><link rel="preload" href="/assets/js/23.92c23f5d.js" as="script"><link rel="preload" href="/assets/js/25.531ad349.js" as="script"><link rel="prefetch" href="/assets/css/1.styles.5abf5dc7.css"><link rel="prefetch" href="/assets/css/15.styles.b52b85a9.css"><link rel="prefetch" href="/assets/css/16.styles.9c6b8fa8.css"><link rel="prefetch" href="/assets/css/22.styles.a5f4e9b5.css"><link rel="prefetch" href="/assets/css/8.styles.81769a90.css"><link rel="prefetch" href="/assets/js/1.5abf5dc7.js"><link rel="prefetch" href="/assets/js/10.dd417a1a.js"><link rel="prefetch" href="/assets/js/11.7c288b29.js"><link rel="prefetch" href="/assets/js/12.29aeae4b.js"><link rel="prefetch" href="/assets/js/13.f270d0f1.js"><link rel="prefetch" href="/assets/js/14.88bc7ca5.js"><link rel="prefetch" href="/assets/js/15.b52b85a9.js"><link rel="prefetch" href="/assets/js/16.9c6b8fa8.js"><link rel="prefetch" href="/assets/js/17.60fe7568.js"><link rel="prefetch" href="/assets/js/18.c9f8321e.js"><link rel="prefetch" href="/assets/js/19.f20967d6.js"><link rel="prefetch" href="/assets/js/20.ca9eef5b.js"><link rel="prefetch" href="/assets/js/21.0739d44c.js"><link rel="prefetch" href="/assets/js/22.a5f4e9b5.js"><link rel="prefetch" href="/assets/js/24.f1f6e2b0.js"><link rel="prefetch" href="/assets/js/26.90a0daa2.js"><link rel="prefetch" href="/assets/js/27.14b336e2.js"><link rel="prefetch" href="/assets/js/28.c056c06b.js"><link rel="prefetch" href="/assets/js/29.ad347285.js"><link rel="prefetch" href="/assets/js/30.80210909.js"><link rel="prefetch" href="/assets/js/31.dd9b922d.js"><link rel="prefetch" href="/assets/js/32.eb9e09bc.js"><link rel="prefetch" href="/assets/js/33.5ccb27ea.js"><link rel="prefetch" href="/assets/js/34.8d5861a2.js"><link rel="prefetch" href="/assets/js/35.dd156f1d.js"><link rel="prefetch" href="/assets/js/36.bb0f5d6b.js"><link rel="prefetch" href="/assets/js/37.5253279a.js"><link rel="prefetch" href="/assets/js/38.7dd2a708.js"><link rel="prefetch" href="/assets/js/39.5e1614a9.js"><link rel="prefetch" href="/assets/js/4.55b9da59.js"><link rel="prefetch" href="/assets/js/40.c15d89b7.js"><link rel="prefetch" href="/assets/js/41.581d7518.js"><link rel="prefetch" href="/assets/js/42.04657e5e.js"><link rel="prefetch" href="/assets/js/5.ae72cf1c.js"><link rel="prefetch" href="/assets/js/6.b467ae63.js"><link rel="prefetch" href="/assets/js/7.1c75d112.js"><link rel="prefetch" href="/assets/js/8.81769a90.js"><link rel="prefetch" href="/assets/js/9.230c8586.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f776f255.css"><link rel="stylesheet" href="/assets/css/styles.94e4f4c9.css"><link rel="stylesheet" href="/assets/css/23.styles.92c23f5d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-3054f967><div data-v-eab05d90 data-v-3054f967><nav class="navbar" data-v-eab05d90><div class="container" data-v-eab05d90><a href="/" class="router-link-active" data-v-eab05d90><span class="navbar-site-name" data-v-eab05d90>
          Stiles 的技术分享
        </span></a> <div class="navbar-toggler" data-v-eab05d90><svg class="icon" style="font-size:1.2em;" data-v-eab05d90 data-v-eab05d90><title data-v-eab05d90 data-v-eab05d90>menu</title><use xlink:href="#icon-menu" data-v-eab05d90 data-v-eab05d90></use></svg></div> <div class="navbar-links" data-v-eab05d90><a href="/" class="navbar-link" data-v-eab05d90>
            Home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-eab05d90>
            Posts
          </a><a href="/projects/" class="navbar-link" data-v-eab05d90>
            Projects
          </a><a href="http://stiles.cc/rss.xml" target="_blank" rel="noopener noreferrer" class="navbar-link" data-v-eab05d90><span data-v-eab05d90>RSS 订阅</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-eab05d90 data-v-eab05d90><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://github.com/stilesTech/TechShare" target="_blank" rel="noopener noreferrer" class="navbar-link" data-v-eab05d90><span data-v-eab05d90>Github</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-eab05d90 data-v-eab05d90><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-eab05d90></div></div> <div class="banner" data-v-66d98992 data-v-3054f967 data-v-3054f967><div class="container" data-v-66d98992><div class="center" data-v-66d98992><h1 data-v-66d98992 data-v-3054f967>
          ELK监控搭建
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-5c108b84 data-v-5c108b84><main class="main" data-v-5c108b84><div class="post" data-v-5c108b84 data-v-5c108b84><section class="post-meta main-div" data-v-0afc19fc><section class="post-date clearfix" data-v-0afc19fc><span class="create-date" data-v-0afc19fc>
      发布时间 : 2020-06-06
    </span> <!----></section> <section class="post-links" data-v-0afc19fc><a href="/posts/2020/06/04/elk-windows%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" class="post-link" data-v-0afc19fc>
      上一篇 : ELK-Windows环境搭建
    </a> <a href="/posts/2020/10/01/redis%E8%AF%A6%E8%A7%A3.html" class="post-link" data-v-0afc19fc>
      下一篇 : Redis详解
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><p>ELK通过x-pack,Sentinl,Watcher 等插件都可以实现监控报警,本文实践了下Sentinl监控插件的安装使用步骤。</p> <h1 id="elk监控搭建"><a href="#elk监控搭建" class="header-anchor">#</a> ELK监控搭建</h1> <p>实现Elasticsearch监控报警，x-pack,Sentinl,Watcher 等都是可行性方案之一,如下记下最近搭建的心得</p> <p>使用x-pack 监控</p> <p>1：安装x-pack: Elasticsearch安装目录下执行 bin/elasticsearch-plugin install x-pack（基本上都是安装失败，本来x-pack文件很大，同时又被墙）</p> <p>2：本地安装：https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-6.2.4.zip</p> <p>下载对应文件后执行 bin/elasticsearch-plugin install file:///path/to/file/x-pack-6.2.4.zip</p> <p>具体参考：</p> <p>https://www.elastic.co/guide/en/elasticsearch/reference/6.2/installing-xpack-es.html</p> <p><img src="/assets/img/1059343506.e36af663.png" alt="../uploads/2020/10/1059343506.png"></p> <p>更改 elasticsearch 的密码执行bin/x-pack/setup-passwords interactive 然后回车设置密码。</p> <p>其他节点只要安装了x-pack插件的话，就可以直接加入了，无需再设置密码了。</p> <div class="language- extra-class"><pre class="language-text"><code>#修改密码的方式
curl -H &quot;Content-Type:application/json&quot; -XPOST -u elastic '&lt;http://127.0.0.1:9200/_xpack/security/user/elastic/_password&gt;' -d '{ &quot;password&quot; : &quot;changme&quot; }'
</code></pre></div><p>config/elasticsearch.yml添加</p> <div class="language- extra-class"><pre class="language-text"><code>#加上这条：设置x-pack为开启
xpack.security.enabled: true
设置描述
xpack.graph.enabled 设置为false禁用X-Pack图形功能。
xpack.ml.enabled 设置为false禁用X-Pack机器学习功能。
xpack.monitoring.enabled 设置为false禁用X-Pack监视功能。
xpack.reporting.enabled 设置为false禁用X-Pack报告功能。
xpack.security.enabled 设置为false禁用X-Pack安全功能。
xpack.watcher.enabled 设置false为禁用观察器。
</code></pre></div><p>验证watcher是否启动</p> <p>http://localhost:9200/_watcher/stats?pretty</p> <p><img src="data:image/png;base64,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" alt="../uploads/2020/10/4154064543.png"></p> <p>kibana上安装x-pack kibana也采用本地安装： bin/kibana-plugin install file:x-pack-6.2.4.zip</p> <p>kibana上设置es密码打开 kibana.yml 设置：</p> <div class="language- extra-class"><pre class="language-text"><code>elasticsearch.username: &quot;elastic&quot;
elasticsearch.password: &quot;changme&quot;
</code></pre></div><p>配置报警信息</p> <p>配置文件改动</p> <div class="language- extra-class"><pre class="language-text"><code>watcher.actions.email.service.account:
    work:
        profile: gmail
        email_defaults:
            from: 'John Doe '
            bcc: archive@host.domain
        smtp:
            auth: true
            starttls.enable: true
            host: smtp.gmail.com
            port: 587
            user:
            password:
PUT _xpack/watcher/watch/log_error_watch
{
  &quot;trigger&quot;: {
    &quot;schedule&quot;: {
      &quot;interval&quot;: &quot;10s&quot;
    }
  },
  &quot;input&quot;: {
    &quot;search&quot;: {
      &quot;request&quot;: {
        &quot;indices&quot;: [&quot;logs&quot;],
        &quot;body&quot;: {
          &quot;query&quot;: {
            &quot;match&quot;: {
              &quot;message&quot;: &quot;error&quot;
            }
          }
        }
      }
    }
  },
  &quot;condition&quot;: {
    &quot;compare&quot;: {
      &quot;ctx.payload.hits.total&quot;: {
        &quot;gt&quot;: 0
      }
    }
  },
  &quot;actions&quot; : {
  &quot;send_email&quot; : {
    &quot;email&quot; : {
      &quot;to&quot; : &quot;POST&quot;,
      &quot;subject&quot; : &quot;ELK 过去一分钟之内发生过错误请及时关注&quot;,
      &quot;body&quot; : &quot;ELK 过去一分钟之内发生过错误请及时关注&quot;
    }
  }
}
}
</code></pre></div><p>logstash配置x-pack:</p> <div class="language- extra-class"><pre class="language-text"><code>vim ./config/logstash.conf
input {
   file {
       path =&gt; &quot;/var/log/messages&quot;
       type =&gt; &quot;systemlog&quot;
      start_position =&gt; &quot;beginning&quot;
       stat_interval =&gt; &quot;3&quot;
   }
}
output {
   if [type] == &quot;systemlog&quot; {
       elasticsearch {
           hosts =&gt; [&quot;127.0.0.1:9200&quot;]
           index =&gt; &quot;system-log-%{+YYYY.MM.dd}&quot;
           user =&gt; &quot;elastic&quot;
           password =&gt; &quot;changme&quot;
       }
   }
}
执行：bin/logstash -f config/logstash.conf
</code></pre></div><p>Sentinl监控插件下载地址https://github.com/sirensolutions/sentinl/releases?after=tag-6.3.2-beta-1</p> <p>kibana安装目录/bin/kibana-plugin install 安装包放的位置/安装包名</p> <p><img src="/assets/img/2169785841.0dcfd36b.png" alt="../uploads/2020/10/2169785841.png"></p> <p>sentinl使用方式：可以借鉴https://www.jianshu.com/p/2816c20f8ead</p> <p>参考的资料如下：</p> <p>https://www.cnblogs.com/heyongboke/p/11393069.html</p> <p>https://www.elastic.co/guide/en/elasticsearch/reference/6.2/installing-xpack-es.html</p> <p>https://www.cnblogs.com/cheesebar/p/9126171.html</p> <p>https://www.cnblogs.com/lfwolf/p/6669812.html</p> <p>https://www.jianshu.com/p/2816c20f8ead</p></div></article> <section class="post-meta main-div" data-v-0afc19fc><section class="post-date clearfix" data-v-0afc19fc><span class="create-date" data-v-0afc19fc>
      发布时间 : 2020-06-06
    </span> <!----></section> <section class="post-links" data-v-0afc19fc><a href="/posts/2020/06/04/elk-windows%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" class="post-link" data-v-0afc19fc>
      上一篇 : ELK-Windows环境搭建
    </a> <a href="/posts/2020/10/01/redis%E8%AF%A6%E8%A7%A3.html" class="post-link" data-v-0afc19fc>
      下一篇 : Redis详解
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-5c108b84><div class="info-card main-div" data-v-1732e38d data-v-5c108b84><div class="info-card-header" data-v-1732e38d><img src="/assets/img/avatar.jpg" alt="Stiles" class="info-avatar" data-v-1732e38d></div> <div class="info-card-body" data-v-1732e38d><section class="info-nickname" data-v-1732e38d>
      Stiles
    </section> <section class="info-desc" data-v-1732e38d>一个梦想成为优秀架构师的程序员。座右铭：stay hungry stay foolish</section> <section class="info-contact" data-v-1732e38d><section data-v-1732e38d><span title="Shenzhen, China" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>Shenzhen, China</title><use xlink:href="#icon-location" data-v-1732e38d data-v-1732e38d></use></svg><span class="info-text" data-v-1732e38d data-v-1732e38d>
          Shenzhen, China
        </span></span></section> <section data-v-1732e38d><span title="YoYo" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>YoYo</title><use xlink:href="#icon-organization" data-v-1732e38d data-v-1732e38d></use></svg><span class="info-text" data-v-1732e38d data-v-1732e38d>
          YoYo
        </span></span></section> <section data-v-1732e38d><a href="mailto:stilesting@gmail.com" title="stilesting@gmail.com" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>stilesting@gmail.com</title><use xlink:href="#icon-email" data-v-1732e38d data-v-1732e38d></use></svg><span class="info-text" data-v-1732e38d data-v-1732e38d>
          stilesting@gmail.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-1732e38d><section class="info-sns clearfix" data-v-1732e38d><a href="https://github.com/stilesTech" target="_blank" class="sns-link" data-v-1732e38d><span title="GitHub: stiles" class="sns-icon" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1.5em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>GitHub: stiles</title><use xlink:href="#icon-github" data-v-1732e38d data-v-1732e38d></use></svg></span></a><a href="https://twitter.com/tiingou" target="_blank" class="sns-link" data-v-1732e38d><span title="Twitter: tiingou" class="sns-icon" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1.5em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>Twitter: tiingou</title><use xlink:href="#icon-twitter" data-v-1732e38d data-v-1732e38d></use></svg></span></a><a href="https://hub.docker.com/u/stilesboy" target="_blank" class="sns-link" data-v-1732e38d><span title="Docker Hub: stiles" class="sns-icon" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1.5em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>Docker Hub: stiles</title><use xlink:href="#icon-docker" data-v-1732e38d data-v-1732e38d></use></svg></span></a><a href="https://juejin.im/user/4103806975222104" target="_blank" class="sns-link" data-v-1732e38d><span title="掘金: stiles" class="sns-icon" data-v-1732e38d data-v-1732e38d><svg class="icon" style="font-size:1.5em;" data-v-1732e38d data-v-1732e38d><title data-v-1732e38d data-v-1732e38d>掘金: stiles</title><use xlink:href="#icon-juejin" data-v-1732e38d data-v-1732e38d></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-5c108b84><!----> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/06/06/elk%E7%9B%91%E6%8E%A7%E6%90%AD%E5%BB%BA.html#post-comments">
      评论
    </a></div></div></aside></div> <footer class="footer" data-v-2c67d6af><p class="footer-sns-links" data-v-2c67d6af><a href="https://github.com/stilesTech" target="_blank" class="sns-link" data-v-2c67d6af><span title="GitHub: stiles" class="sns-icon" data-v-2c67d6af data-v-2c67d6af><svg class="icon" style="font-size:25px;" data-v-2c67d6af data-v-2c67d6af><title data-v-2c67d6af data-v-2c67d6af>GitHub: stiles</title><use xlink:href="#icon-github" data-v-2c67d6af data-v-2c67d6af></use></svg></span></a><a href="https://twitter.com/tiingou" target="_blank" class="sns-link" data-v-2c67d6af><span title="Twitter: tiingou" class="sns-icon" data-v-2c67d6af data-v-2c67d6af><svg class="icon" style="font-size:25px;" data-v-2c67d6af data-v-2c67d6af><title data-v-2c67d6af data-v-2c67d6af>Twitter: tiingou</title><use xlink:href="#icon-twitter" data-v-2c67d6af data-v-2c67d6af></use></svg></span></a><a href="https://hub.docker.com/u/stilesboy" target="_blank" class="sns-link" data-v-2c67d6af><span title="Docker Hub: stiles" class="sns-icon" data-v-2c67d6af data-v-2c67d6af><svg class="icon" style="font-size:25px;" data-v-2c67d6af data-v-2c67d6af><title data-v-2c67d6af data-v-2c67d6af>Docker Hub: stiles</title><use xlink:href="#icon-docker" data-v-2c67d6af data-v-2c67d6af></use></svg></span></a><a href="https://juejin.im/user/4103806975222104" target="_blank" class="sns-link" data-v-2c67d6af><span title="掘金: stiles" class="sns-icon" data-v-2c67d6af data-v-2c67d6af><svg class="icon" style="font-size:25px;" data-v-2c67d6af data-v-2c67d6af><title data-v-2c67d6af data-v-2c67d6af>掘金: stiles</title><use xlink:href="#icon-juejin" data-v-2c67d6af data-v-2c67d6af></use></svg></span></a></p> <p class="footer-text" data-v-2c67d6af><span data-v-2c67d6af>Powered by </span> <a href="https://github.com/vuejs/vuepress" target="_blank" data-v-2c67d6af>
      VuePress
    </a> <span data-v-2c67d6af> | </span> <a href="https://github.com/meteorlxy/vuepress-theme-meteorlxy" target="_blank" data-v-2c67d6af>
        meteorlxy
      </a></p> <p class="footer-text" data-v-2c67d6af>Copyright 2023-present <a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021014324号-1</a> | MIT License</p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/vendor.vue.f0f8acc0.js" defer></script><script src="/assets/js/23.92c23f5d.js" defer></script><script src="/assets/js/25.531ad349.js" defer></script><script src="/assets/js/vendor.commons.f776f255.js" defer></script><script src="/assets/js/app.94e4f4c9.js" defer></script>
  </body>
</html>
